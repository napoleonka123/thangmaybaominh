;/*FB_PKG_DELIM*/

__d("BasicFBNux",["AsyncRequest","XBasicFBNuxDismissController","XBasicFBNuxViewController"],(function(a,b,c,d,e,f,g){function a(a,b){a.subscribe("hide",function(){return h(b)})}function b(a){a=c("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",a).getURI();new(c("AsyncRequest"))().setURI(a).send()}function h(a){a=c("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",a).getURI();new(c("AsyncRequest"))().setURI(a).send()}g.subscribeHide=a;g.onView=b;g.onDismiss=h}),98);
__d("DocumentFocusForAdsVideoAutoplayRule",["VideoAutoplayRule"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}var c=b.prototype;c.calculateAutoplayScore=function(){return this.isEnabled()?this.$DocumentFocusForAdsVideoAutoplayRule$p_1():1};c.$DocumentFocusForAdsVideoAutoplayRule$p_1=function(){var a=this.videoUnit.getVideoPlayerController();a=!!(a&&a.isAd());return a?document.hasFocus()?1:0:1};return b}(c("VideoAutoplayRule"));g["default"]=a}),98);
__d("EmbeddedVideoPauseOverlay",["cx","fbt","Arbiter","CSS","DOM","DOMDimensions","EventListener","throttle"],(function(a,b,c,d,e,f,g,h){var i="_3bw";a=function(){"use strict";function a(a,c,d,e,f,g,i,j,k){var l=this;this.$1=c;this.$2=a;this.$3=d;this.$4=e;this.$5=f;this.$6=g;this.$7=i;this.$8=j;this.$9=0;k?(this.$10=k.showOnlyOnFullscreen,this.$11=k.showOnEndscreen):(this.$10=!1,this.$11=!0);this.$12=h._("Like");this.$13=h._("Unlike");this.$14=h._("Share");this.$15();this.$2.addListener("beginPlayback",this.$16.bind(this));this.$2.addListener("pausePlayback",this.$17.bind(this));this.$2.addListener("finishPlayback",this.$17.bind(this));this.$2.addListener("toggleFullscreen",this.$18.bind(this));b("EventListener").listen(this.$2.getRootNode(),"mousemove",b("throttle")(this.$19.bind(this),200));b("EventListener").listen(this.$2.getRootNode(),"mouseenter",function(){l.$20=!0});b("EventListener").listen(this.$2.getRootNode(),"mouseleave",function(){l.$2.isState("playing")&&(l.$20=!1,l.$21())});b("Arbiter").subscribe("embeddedUfiToggle",function(){l.$22(),l.$23()});b("EventListener").listen(window,"resize",b("throttle")(function(){l.$23()},100))}var c=a.prototype;c.$16=function(){this.$22(),this.$23(),this.$19()};c.$22=function(){var a;this.$2.isFullscreen()?a=64:a=32;this.$15();this.$9=b("DOMDimensions").getElementDimensions(this.$3).width+b("DOMDimensions").getElementDimensions(this.$4).width+a};c.$23=function(){if(this.$2.isState("destroyed"))return;var a=b("DOMDimensions").getElementDimensions(this.$2.getRootNode()).width;a=a<this.$9;a?this.$24():this.$15()};c.$15=function(){this.$6&&b("DOM").setContent(this.$6,this.$14),this.$7&&b("DOM").setContent(this.$7,this.$12),this.$8&&b("DOM").setContent(this.$8,this.$13),this.$5&&this.$5.showText()};c.$24=function(){this.$6&&b("DOM").setContent(this.$6,null),this.$7&&b("DOM").setContent(this.$7,null),this.$8&&b("DOM").setContent(this.$8,null),this.$5&&this.$5.hideText()};c.$25=function(){return this.$10&&!this.$2.isFullscreen()?!1:this.$2.isState("playing")&&this.$20||this.$2.isState("paused")||this.$26&&this.$2.isState("finished")};c.$19=function(){var a=this;this.$25()&&(this.$27(),clearTimeout(this.$28),this.$28=setTimeout(function(){a.$2.isState("playing")&&a.$21()},3e3))};c.$18=function(){this.$25()?this.$27():this.$21()};c.$17=function(){this.$25()?this.$27():this.$21()};c.$27=function(){b("CSS").removeClass(this.$1,i)};c.$21=function(){b("CSS").addClass(this.$1,i)};return a}();e.exports=a}),130);
__d("RealtimeEntityPresenceTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setActionReason=function(a){this.$1.action_reason=a;return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setCapabilities=function(a){this.$1.capabilities=a;return this};c.setClientSubscriptionID=function(a){this.$1.client_subscription_id=a;return this};c.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};c.setEntityHandler=function(a){this.$1.entity_handler=a;return this};c.setEntityID=function(a){this.$1.entity_id=a;return this};c.setEntityType=function(a){this.$1.entity_type=a;return this};c.setEventSource=function(a){this.$1.event_source=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setGatewayConnected=function(a){this.$1.gateway_connected=a;return this};c.setSequenceID=function(a){this.$1.sequence_id=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSourceHost=function(a){this.$1.source_host=a;return this};c.setSourceTwTaskHandle=function(a){this.$1.source_tw_task_handle=a;return this};c.setTopic=function(a){this.$1.topic=a;return this};c.setUserAgentString=function(a){this.$1.user_agent_string=a;return this};c.setUserFbid=function(a){this.$1.user_fbid=a;return this};return a}();c={action:!0,action_reason:!0,app_id:!0,capabilities:!0,client_subscription_id:!0,client_time_ms:!0,entity_handler:!0,entity_id:!0,entity_type:!0,event_source:!0,exception_message:!0,exception_type:!0,gateway_connected:!0,sequence_id:!0,session_id:!0,source_host:!0,source_tw_task_handle:!0,topic:!0,user_agent_string:!0,user_fbid:!0};f["default"]=a}),66);
__d("EntityPresenceLogger",["BladeRunnerStreamStatus","CurrentUser","EntityPresenceConfig","Random","RealtimeEntityPresenceTypedLogger","RequestStreamCommonRequestStreamCommonTypes","UserAgentData","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="client";a=function(){function a(a,b,c,d){this.entityType=a,this.entityID=b,this.subscriptionID=c,this.shouldLog=this.$1(),this.sequenceID=0,this.appID=d}var b=a.prototype;b.logEnter=function(a){this.shouldLog&&this.$2().setAction("enter").setSequenceID(++this.sequenceID).setCapabilities(a).log()};b.logReconnect=function(a){this.shouldLog&&this.$2().setAction("enter").setActionReason("reconnect").setSequenceID(++this.sequenceID).setCapabilities(a).log()};b.logSubscribeCallback=function(a){this.shouldLog&&this.$2().setAction("subscribe_completed").setActionReason(a?"succeeded":"failed").log()};b.logPing=function(){this.shouldLog&&this.$2().setAction("ping").setSequenceID(++this.sequenceID).log()};b.logSkippedPing=function(){this.shouldLog&&this.$2().setAction("skipped_ping").setSequenceID(this.sequenceID).log()};b.logChangeCapabilities=function(a){this.shouldLog&&this.$2().setAction("change_capabilities").setSequenceID(++this.sequenceID).setCapabilities(a).log()};b.logLeave=function(){this.shouldLog&&this.$2().setAction("leave").setSequenceID(++this.sequenceID).log()};b.logFlowStatus=function(a){if(this.shouldLog){var b="unknown";switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:b="accepted";break;case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:b="rejected";break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:b="started";break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:b="stopped";break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:b="closed";break}this.$2().setAction("flow_"+b).log()}};b.logDGWFlowStatus=function(a){if(this.shouldLog){var b="unknown";switch(a){case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:b="accepted";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:b="started";break;case d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:b="stopped";break}this.$2().setAction("flow_"+b).log()}};b.logUnsubscribeCallback=function(a){this.shouldLog&&this.$2().setAction("unsubscribe_completed").setActionReason(a?"succeeded":"failed").log()};b.getLogInfo=function(){return this.shouldLog?{client_subscription_id:this.subscriptionID,sequence_id:this.sequenceID.toString()}:null};b.getLogInfoMQTT=function(){return this.shouldLog?{clientSubscriptionId:this.subscriptionID,sequenceId:this.sequenceID}:null};b.$1=function(){if(c("gkx")("25813"))return!0;return c("gkx")("25814")?d("Random").random()<(Object.prototype.hasOwnProperty.call(c("EntityPresenceConfig").samplingRateOverride,this.entityType)?c("EntityPresenceConfig").samplingRateOverride[this.entityType]:c("EntityPresenceConfig").sessionLoggingSamplingRate):!1};b.$2=function(){return new(c("RealtimeEntityPresenceTypedLogger"))().setEntityType(this.entityType).setEntityID(this.entityID).setClientSubscriptionID(this.subscriptionID).setClientTimeMs(Date.now()).setEventSource(h).setAppID(this.appID).setUserFbid(c("CurrentUser").getID()).setUserAgentString(c("UserAgentData").browserName+"/"+(c("UserAgentData").browserFullVersion||""))};return a}();g["default"]=a}),98);
__d("EntityPresenceClient",["$InternalEnum","Deferred","EntityPresenceLogger","ODS","RequestStreamCommonRequestStreamCommonTypes","TransportSelectingClientSingleton","UserActivity","clearInterval","justknobx","setInterval","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i="219994525426954",j="realtime.entity_presence.js_client",k=b("$InternalEnum").Mirrored(["ON_TAB_ONLY","ALWAYS"]);function a(a,b,e,f){f===void 0&&(f=k.ON_TAB_ONLY);var g=c("uuidv4")();g=new(c("EntityPresenceLogger"))(a,b,g,i);g.logEnter(e);(h||(h=d("ODS"))).bumpEntityKey(3291,j,a+".enter");var l=function(){switch(f){case k.ON_TAB_ONLY:return c("UserActivity").isOnTab();case k.ALWAYS:return!0}};return o(a,b,e,l,g,f)}function l(a,b,e,f,g,i,k){e=c("TransportSelectingClientSingleton").requestStream({method:"EntityPresence:"+a},JSON.stringify({entity_type:a,entity_id:b,capabilities:(b=e)!=null?b:null,log_info:f.getLogInfo(),disable_hibernate_mode:k}),{onFlowStatus:function(a){i(a),f.logDGWFlowStatus(a)}});e.then(function(a){g(a)})["catch"](function(){(h||(h=d("ODS"))).bumpEntityKey(3291,j,a+".stream_connection.failed"),g(null)})}function m(a,b,e,f){return c("setInterval")(function(){if(b()&&a()!==null&&e()===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started){var c;f.logPing();(c=a())==null?void 0:c.amendWithoutAck("")}else f.logSkippedPing()},3e3)}function n(a,b,e,f,g){return c("setInterval")(function(){!b()&&a()!=null&&e()===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started?f():b()&&e()===d("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped&&g()},3e3)}function o(a,b,e,f,g,i){var o,p,q=new(c("Deferred"))(),r=function(a){p=a,q.resolve()},s=function(a){o=a},t=function(){return o},u=function(){return p},v=c("justknobx")._("1755"),w=function(){l(a,b,e,g,r,s,v)},x=function(){var a;(a=p)==null?void 0:a.cancel()};w();var y=null;!v?y=m(u,f,t,g):i===k.ON_TAB_ONLY&&(y=n(u,f,t,x,w));return{entityID:b,capabilities:e,changeCapabilities:function(b){var c;g.logChangeCapabilities(b);p===null?(h||(h=d("ODS"))).bumpEntityKey(3291,j,a+".change_capabilities.failed"):(h||(h=d("ODS"))).bumpEntityKey(3291,j,a+".change_capabilities");return(c=p)==null?void 0:c.amendWithAck(JSON.stringify({capabilities:b}))},leave:function(){var b;g.logLeave();(h||(h=d("ODS"))).bumpEntityKey(3291,j,a+".leave");(b=p)==null?void 0:b.cancel();c("clearInterval")(y)},getPromise:function(){return q.getPromise()}}}g.EntityPresenceActivityPolicy=k;g.enter=a}),98);
__d("FBCircularGlyph.react",["cx","Image.react","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=a.circleSize,d=a.glyph,e=a.glyphSize;a=babelHelpers.objectWithoutPropertiesLoose(a,["circleSize","glyph","glyphSize"]);return j.jsx("div",babelHelpers["extends"]({},a,{className:c("joinClasses")("_32qy",a.className),style:babelHelpers["extends"]({width:b,height:b},a.style),children:j.jsx("div",{className:"_32qz",children:j.jsx("div",{className:"_32q-",children:j.jsx(c("Image.react"),{src:d,width:e,height:e})})})}))};return b}(j.Component);g["default"]=a}),98);
__d("FeedVideoClickToPlayController",["DocumentFocusForAdsVideoAutoplayRule","Event","VideoPlayerAbortLoadingExperiment","VideoPlayerExperiments","destroyOnUnload","setImmediate","throttle"],(function(a,b,c,d,e,f,g){var h=null;a=function(){function a(){var a=this;this.$4=new Set();this.$3=null;this.$2=null;this.$1=null;c("destroyOnUnload")(function(){a.$4.clear(),a.$2&&(a.$2.remove(),a.$2=null),a.$3&&(a.$3.disconnect(),a.$3=null),a.$1&&(a.$1.remove(),a.$1=null),a===h&&(h=null)})}var b=a.prototype;b.addVideoUnit=function(a){var b=this;if(c("VideoPlayerExperiments").useBringYourOwnAutoplayRule&&c("VideoPlayerExperiments").pauseAdIfNoDocumentFocus){var d=new(c("DocumentFocusForAdsVideoAutoplayRule"))(a);a.registerAutoplayRule(d)}this.$5()||this.$6();this.$7()||this.$8();a.addListener("beginPlayback",function(c){c=c.reason;(c==="user_initiated"||c==="loop_initiated")&&b.$4.add(a)});a.addListener("turnOffAutoplay",function(c){c=c.reason;c==="unmuted"&&b.$4.add(a)});a.getVideoPlayerController().isState("playing")&&!a.isAutoplayable()&&this.$4.add(a);a.addListener("pausePlayback",function(){b.$4["delete"](a)});a.addListener("finishPlayback",function(){b.$4["delete"](a)})};a.registerVideoUnit=function(b){h==null&&(h=new a()),h.addVideoUnit(b)};b.$6=function(){this.$2&&this.$2.remove(),this.$2=c("Event").listen(window,"scroll",c("throttle")(this.onWindowEvent.bind(this),200))};b.$8=function(){this.$1&&this.$1.remove(),this.$1=c("Event").listen(window,"resize",c("throttle")(this.onWindowEvent.bind(this),200))};b.$5=function(){return!!this.$2};b.$7=function(){return!!this.$1};b.$9=function(a){a.pause("autoplay_initiated"),!c("VideoPlayerExperiments").noAbortLoadingInFeedClickToPlay&&c("VideoPlayerAbortLoadingExperiment").canAbort&&a.abortLoading(),this.$4["delete"](a)};b.onWindowEvent=function(){var a=this;this.$4.forEach(function(b){if(b&&!b.isVisible()&&!b.getIsInChannel()){var d=b.getVideoPlayerController();d.isAd()||c("VideoPlayerExperiments").pauseWhenOffscreen?c("VideoPlayerExperiments").slidingWNSv3?c("setImmediate")(function(){b&&!b.isVisible()&&!b.getIsInChannel()&&a.$9(b)}):a.$9(b):d.isMuted()&&d.isState("playing")&&(a.$9(b),d.emit("resumeAutoplay"))}})};return a}();g["default"]=a}),98);
__d("LitestandStoryInsertionStatus",["ArbiterMixin"],(function(a,b,c,d,e,f,g){var h="check";a={registerBlocker:function(a){return this.subscribe(h,function(b,c){c.can_insert&&a()&&(c.can_insert=!1)})},canInsert:function(){var a={can_insert:!0};this.inform(h,a);return a.can_insert}};Object.assign(a,c("ArbiterMixin"));b=a;g["default"]=b}),98);
__d("FeedVideoPlayerController",["csx","DOM","DOMQuery","LitestandStoryInsertionStatus","Run","SubscriptionsHandler","VideoAutoplayPlayerBase","VideoPlayerApiEvents","VideoPlayerExperiments","VideoPlayerLoggerErrorStates","VideoPlayerLoggerErrors","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g,h){"use strict";var i=42;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;f=a.call(this)||this;f.$FeedVideoPlayerController$p_1=e;f.$FeedVideoPlayerController$p_2=b;f.$FeedVideoPlayerController$p_3=new Set();f.$FeedVideoPlayerController$p_1.viewport_autoplay||f.$FeedVideoPlayerController$p_3.add("server_blocked");f.$FeedVideoPlayerController$p_12=c("VideoPlayerExperiments").autoplayUntilHalfGone?.5:1;f.$FeedVideoPlayerController$p_4=f.isAutoplayable();f.$FeedVideoPlayerController$p_6=e.controller;f.$FeedVideoPlayerController$p_10=!!e.startsMuted;f.$FeedVideoPlayerController$p_13=!1;f.$FeedVideoPlayerController$p_7=f.isAutoplayable();(f.$FeedVideoPlayerController$p_6.getIsInChannel()||f.$FeedVideoPlayerController$p_6.isState("playing")&&!f.$FeedVideoPlayerController$p_6.isMuted())&&(f.$FeedVideoPlayerController$p_7=!1);f.$FeedVideoPlayerController$p_6.registerOption("FeedAutoplay","isAutoplaying",function(){return f.$FeedVideoPlayerController$p_7},function(a){f.$FeedVideoPlayerController$p_7=a});f.$FeedVideoPlayerController$p_6.registerOption("FeedAutoplay","isVisibleForAutoplay",function(){return f.isVisible()});f.$FeedVideoPlayerController$p_6.registerOption("FeedAutoplay","shouldOpenSidePaneInChannelView",function(){return e.autoPlayWithChannelViewOrSnowlift});f.$FeedVideoPlayerController$p_6.registerOption("FeedAutoplay","isFilteredByWarningScreen",function(){return f.$FeedVideoPlayerController$p_13},function(a){f.$FeedVideoPlayerController$p_13=a});f.$FeedVideoPlayerController$p_6.setLogEntryPropertyGetters({autoplay_eligible:function(){return f.isAutoplayable()},autoplay_failure_reasons:function(){return JSON.stringify(Array.from(f.$FeedVideoPlayerController$p_3))}});f.$FeedVideoPlayerController$p_14();d("Run").onLeave(function(){f.$FeedVideoPlayerController$p_5.release()});if(f.isState("fallback")){f.$FeedVideoPlayerController$p_15();f.$FeedVideoPlayerController$p_16();return babelHelpers.assertThisInitialized(f)}f.$FeedVideoPlayerController$p_5.addSubscriptions(c("LitestandStoryInsertionStatus").registerBlocker(function(){return f.isState("playing")}));return f}var e=b.prototype;e.$FeedVideoPlayerController$p_17=function(){return this.$FeedVideoPlayerController$p_6.isState("destroyed")};e.getDistanceToViewport=function(){if(this.$FeedVideoPlayerController$p_17())return-Infinity;if(this.$FeedVideoPlayerController$p_6.isFullscreen())return 0;var a=c("getViewportDimensions")().height,b=this.getDOMPosition();if(b.height===0)return-Infinity;b=b.y+(1-this.$FeedVideoPlayerController$p_12)*b.height;return b-a/2};e.isVisible=function(){if(this.$FeedVideoPlayerController$p_17())return!1;if(this.$FeedVideoPlayerController$p_6.isFullscreen())return!0;if(this.$FeedVideoPlayerController$p_6.hasDialog()&&!this.$FeedVideoPlayerController$p_6.isTahoe())return!1;var a=c("getViewportDimensions")().height,b=c("getViewportDimensions")().width,d=this.getDOMPosition();if(d.height===0)return!1;var e=d.y-i+(1-this.$FeedVideoPlayerController$p_12)*d.height,f=d.y+this.$FeedVideoPlayerController$p_12*d.height,g=d.x+(1-this.$FeedVideoPlayerController$p_12)*d.width,h=d.x+this.$FeedVideoPlayerController$p_12*d.width;if(e<0||f>=a||g<0||h>=b)return!1;e=this.$FeedVideoPlayerController$p_18();return e!==null?this.$FeedVideoPlayerController$p_19(d,c("getElementPosition")(e)):!0};e.$FeedVideoPlayerController$p_18=function(){var a=d("DOMQuery").scry(this.$FeedVideoPlayerController$p_2.video_container,"^div._1yj5");return a.length>0?a[0]:null};e.$FeedVideoPlayerController$p_19=function(a,b){var c=a.x;a=a.x+a.width;var d=b.x;b=b.x+b.width;return d<c&&a<b};e.isAutoplayable=function(){return this.$FeedVideoPlayerController$p_1.viewport_autoplay&&!this.$FeedVideoPlayerController$p_9&&!this.$FeedVideoPlayerController$p_3.size&&!this.$FeedVideoPlayerController$p_13};e.getCurrentTimePosition=function(){return this.$FeedVideoPlayerController$p_6.getCurrentTimePosition()};e.playWithoutUnmute=function(a){this.$FeedVideoPlayerController$p_6.play(a)};e.getVideoID=function(){return this.$FeedVideoPlayerController$p_6.getVideoID()};e.$FeedVideoPlayerController$p_20=function(){this.$FeedVideoPlayerController$p_16()};e.$FeedVideoPlayerController$p_14=function(){var a=this;this.$FeedVideoPlayerController$p_5=new(c("SubscriptionsHandler"))();var b=[["finishPlayback",function(){return a.$FeedVideoPlayerController$p_21()}],["turnOffAutoplay",function(b){var c=null;b&&(c=b.reason);a.$FeedVideoPlayerController$p_22(c)}],["unmuteVideo",function(){return a.$FeedVideoPlayerController$p_23()}],["stateChange",function(){return a.$FeedVideoPlayerController$p_24()}],["switchVideo",function(){return a.$FeedVideoPlayerController$p_20()}],["fallbackPlay",function(){return a.$FeedVideoPlayerController$p_25()}],["buffered",function(){return a.$FeedVideoPlayerController$p_16()}],["buffering",function(){return a.$FeedVideoPlayerController$p_16()}],["beginPlayback",function(b){b=b.reason;return a.$FeedVideoPlayerController$p_26(b)}],["toggleFullscreen",function(){return a.$FeedVideoPlayerController$p_27()}],["resumeAutoplay",function(b){var c=null;b&&(c=b.reason);a.$FeedVideoPlayerController$p_28(c)}],["crossfadeWatchAndScroll",function(){return a.$FeedVideoPlayerController$p_29()}],["enterWatchAndScroll",function(){return a.$FeedVideoPlayerController$p_29()}],["exitWatchAndScroll",function(){return a.$FeedVideoPlayerController$p_30()}],["muteVideo",function(){return a.$FeedVideoPlayerController$p_31()}]],d=function(b){return a.emit.bind(a,b)};this.$FeedVideoPlayerController$p_5.addSubscriptions.apply(this.$FeedVideoPlayerController$p_5,b.map(function(b){var c=b[0];b=b[1];return a.$FeedVideoPlayerController$p_6.addListener(c,b)}).concat(c("VideoPlayerApiEvents").map(function(b){return a.$FeedVideoPlayerController$p_6.addListener(b,d(b))})))};e.$FeedVideoPlayerController$p_31=function(){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&this.$FeedVideoPlayerController$p_32("unmuted")};e.$FeedVideoPlayerController$p_30=function(){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&(this.$FeedVideoPlayerController$p_32("watch_and_scroll"),this.$FeedVideoPlayerController$p_6&&this.$FeedVideoPlayerController$p_6.isMuted()&&this.$FeedVideoPlayerController$p_32("unmuted"))};e.$FeedVideoPlayerController$p_29=function(){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&(this.$FeedVideoPlayerController$p_33("watch_and_scroll"),this.$FeedVideoPlayerController$p_32("manually_paused"))};e.$FeedVideoPlayerController$p_27=function(){this.$FeedVideoPlayerController$p_10&&this.$FeedVideoPlayerController$p_6.unmute()};e.$FeedVideoPlayerController$p_24=function(){if(this.$FeedVideoPlayerController$p_17())return;this.$FeedVideoPlayerController$p_6.isState("fallback")&&this.$FeedVideoPlayerController$p_15();!this.$FeedVideoPlayerController$p_6.isState("loading")&&this.$FeedVideoPlayerController$p_8&&(clearTimeout(this.$FeedVideoPlayerController$p_8),this.$FeedVideoPlayerController$p_8=null);this.$FeedVideoPlayerController$p_16()};e.$FeedVideoPlayerController$p_26=function(a){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&this.$FeedVideoPlayerController$p_32("manually_paused"),a==="user_initiated"&&this.$FeedVideoPlayerController$p_10&&this.$FeedVideoPlayerController$p_6.unmute()};e.preload=function(){this.$FeedVideoPlayerController$p_6.preload&&this.$FeedVideoPlayerController$p_6.preload()};e.logDisplayed=function(){this.$FeedVideoPlayerController$p_6.logEvent("displayed",{autoplay_reason:this.$FeedVideoPlayerController$p_1.autoplay_reason})};e.$FeedVideoPlayerController$p_25=function(){var a={error:d("VideoPlayerLoggerErrors").ENTERED_FALLBACK,state:d("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE};this.$FeedVideoPlayerController$p_6.logEvent("error",a)};e.$FeedVideoPlayerController$p_23=function(){c("VideoPlayerExperiments").slidingWNSv3&&this.$FeedVideoPlayerController$p_6.isAd()&&(this.$FeedVideoPlayerController$p_12=.5),this.$FeedVideoPlayerController$p_10=!1,this.$FeedVideoPlayerController$p_7=!1};e.$FeedVideoPlayerController$p_21=function(){var a=this.$FeedVideoPlayerController$p_6.getOption("Looping","isLooping");a||this.$FeedVideoPlayerController$p_33("has_seen_finished")};e.$FeedVideoPlayerController$p_15=function(){this.$FeedVideoPlayerController$p_11={isAutoplaying:this.$FeedVideoPlayerController$p_7,preventAutoplay:this.$FeedVideoPlayerController$p_9},this.$FeedVideoPlayerController$p_33("fallback")};e.$FeedVideoPlayerController$p_33=function(a){this.$FeedVideoPlayerController$p_9=!0,a&&this.$FeedVideoPlayerController$p_3.add(a),this.$FeedVideoPlayerController$p_7=!1};e.$FeedVideoPlayerController$p_28=function(a){this.$FeedVideoPlayerController$p_32(a)};e.$FeedVideoPlayerController$p_32=function(a){a?this.$FeedVideoPlayerController$p_3["delete"](a):(this.$FeedVideoPlayerController$p_3["delete"]("unmuted"),this.$FeedVideoPlayerController$p_3["delete"]("has_seen_finished"),this.$FeedVideoPlayerController$p_3["delete"]("manually_paused")),this.$FeedVideoPlayerController$p_9=this.$FeedVideoPlayerController$p_3.size>0,this.$FeedVideoPlayerController$p_7=!this.$FeedVideoPlayerController$p_9};e.$FeedVideoPlayerController$p_22=function(a){if(c("VideoPlayerExperiments").enableAutoplayOnUnmutedVideos&&a==="unmuted")return;this.$FeedVideoPlayerController$p_33(a);this.$FeedVideoPlayerController$p_7=!1};e.$FeedVideoPlayerController$p_16=function(){this.$FeedVideoPlayerController$p_34()};e.getDOMPosition=function(){return this.$FeedVideoPlayerController$p_6.getDOMPosition()};e.isLooping=function(){return!!this.$FeedVideoPlayerController$p_6.getOption("Looping","isLooping")};e.pause=function(a){this.$FeedVideoPlayerController$p_6.pause(a)};e.$FeedVideoPlayerController$p_35=function(){this.$FeedVideoPlayerController$p_14(),this.$FeedVideoPlayerController$p_3["delete"]("fallback"),this.$FeedVideoPlayerController$p_7=this.$FeedVideoPlayerController$p_11.isAutoplaying,this.$FeedVideoPlayerController$p_9=this.$FeedVideoPlayerController$p_11.preventAutoplay};e.$FeedVideoPlayerController$p_34=function(){var a=this;if(this.isState("fallback")){this.$FeedVideoPlayerController$p_5.release();var b=this.$FeedVideoPlayerController$p_2;b.fallback_link&&(c("DOM").remove(this.$FeedVideoPlayerController$p_6.getVideoNode()),c("DOM").replace(b.video_container,b.fallback_link),c("DOM").appendContent(b.fallback_link,b.video_container));if(this.$FeedVideoPlayerController$p_6.isFallbackRecoverable())this.$FeedVideoPlayerController$p_35();else var d=this.$FeedVideoPlayerController$p_6.addListener("VideoPlayerFallbackEvents/recover",function(){a.$FeedVideoPlayerController$p_35(),d.remove()})}};e.isState=function(a){return this.$FeedVideoPlayerController$p_6.isState(a)};e.getSource=function(){return this.$FeedVideoPlayerController$p_6.getSource()};e.getIsInChannel=function(){return this.$FeedVideoPlayerController$p_6.getIsInChannel()};e.getVideoPlayerController=function(){return this.$FeedVideoPlayerController$p_6};e.abortLoading=function(){this.$FeedVideoPlayerController$p_1.abort_loading_blocked||this.$FeedVideoPlayerController$p_6.abortLoading()};e.isMuted=function(){return this.$FeedVideoPlayerController$p_6.isMuted()};e.isPlaying=function(){return this.$FeedVideoPlayerController$p_6.isState("playing")};e.shouldPauseWhenScrolledOffscreen=function(){return c("VideoPlayerExperiments").enableAutoplayOnUnmutedVideos?!0:!1};return b}(c("VideoAutoplayPlayerBase"));g["default"]=a}),98);
__d("PlayerKeyboardControls.react",["cx","ix","CenteredContainer.react","Event","EventListener","FBCircularGlyph.react","Image.react","Keys","LiveRewindUtils","LiveVideoPlayerActions","ReactDOM_DEPRECATED","clamp","joinClasses","react"],(function(a,b,c,d,e,f,g,h,i){var j,k=j||d("react"),l=10,m=.1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={action:null},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){this.$1=c("EventListener").listen(this.props.controller.getRootNode(),"keydown",this.$2.bind(this))};e.componentWillUnmount=function(){this.$1&&this.$1.remove()};e.$3=function(){if(!this.props.isLiveRewindEnabled)return;var a=this.props.controller,b=a.getCurrentTimePosition();this.setState({action:"pause"});a.pause("user_initiated");d("LiveVideoPlayerActions").setIsRewound(a,!0);d("LiveRewindUtils").logLiveRewindEvent("pause",a,null,b,null,b)};e.$4=function(){if(!this.props.isLiveRewindEnabled)return;var a=this.props.controller,b=a.getCurrentTimePosition();this.setState({action:"play"});a.play("user_initiated");d("LiveRewindUtils").logLiveRewindEvent("play",a,null,b,null,b)};e.$5=function(){return this.props.seekFrameWhenPaused&&!this.props.controller.isState("playing")?1/30:this.props.seekIncrement};e.$2=function(a){var b=this.props.controller,e=this.props.controller.getSource()==="tahoe";if(this.props.isFullscreenRequired&&!b.isFullscreen())return;var f=b.getCurrentTimePosition(),g=b.getVolume();switch(c("Event").getKeyCode(a)){case c("Keys").SPACE:e&&a.preventDefault();if(b.isState("playing")){if(this.props.isLiveStreaming){this.$3();break}this.setState({action:"pause"});b.pause("user_initiated")}else{if(this.props.isLiveStreaming){this.$4();break}this.setState({action:"play"});b.play("user_initiated")}break;case c("Keys").LEFT:if(this.props.isLiveStreaming){this.props.isLiveRewindEnabled&&(d("LiveRewindUtils").seekBack(b),this.setState({action:"rewind"}));break}this.setState({action:"rewind"});b.seek(f-this.$5());break;case c("Keys").RIGHT:if(this.props.isLiveStreaming){this.props.isLiveRewindEnabled&&(d("LiveRewindUtils").seekForward(b),this.setState({action:"forward"}));break}this.setState({action:"forward"});b.seek(f+this.$5());break;case c("Keys").UP:if(!b.isBroadcaster()&&b.isAudioBlocked())break;e&&a.preventDefault();f=Math.min(g+m,1);this.setState({action:"volume-up"});b.setVolume(f);b.isMuted()&&b.unmute();break;case c("Keys").DOWN:if(!b.isBroadcaster()&&b.isAudioBlocked())break;e&&a.preventDefault();f=Math.max(g-m,0);f<.001?(this.setState({action:"mute"}),b.mute()):(this.setState({action:"volume-down"}),b.setVolume(f));break;case c("Keys").M:if(!b.isBroadcaster()&&b.isAudioBlocked())break;b.isMuted()?(this.setState({action:"unmute"}),b.unmute()):(this.setState({action:"mute"}),b.mute());break;case c("Keys").F:b.isFullscreen()?this.setState({action:"exit-fs"}):this.setState({action:"enter-fs"});setTimeout(function(){return b.toggleFullscreen()},100);break;case c("Keys").COMMA:this.props.enablePlaybackRateControl&&b.setPlaybackRate(c("clamp")(b.getPlaybackRate()/2,.5,1));break;case c("Keys").PERIOD:this.props.enablePlaybackRateControl&&b.setPlaybackRate(c("clamp")(b.getPlaybackRate()*2,1,2));break}};e.render=function(){if(!this.state.action)return null;var a=this.props.controller,b="",e="",f=null;switch(this.state.action){case"play":b=i("476305");break;case"pause":b=i("476304");break;case"rewind":b=i("476307");e="_380-";a.isState("playing")?f=this.props.seekIncrement!==l?null:k.jsx(c("Image.react"),{className:"_pa6",src:i("476306")}):f=this.props.seekFrameWhenPaused?null:k.jsx(c("Image.react"),{className:"_pa6",src:i("476306")});break;case"forward":b=i("476308");e="_3813";a.isState("playing")?f=this.props.seekIncrement!==l?null:k.jsx(c("Image.react"),{className:"_pa6",src:i("476306")}):f=this.props.seekFrameWhenPaused?null:k.jsx(c("Image.react"),{className:"_pa6",src:i("476306")});break;case"volume-up":case"unmute":b=i("476301");break;case"volume-down":b=i("476302");break;case"mute":b=i("476303");break;case"enter-fs":b=i("476310");break;case"exit-fs":b=i("476309");break}a=k.jsx(c("FBCircularGlyph.react"),{circleSize:120,className:c("joinClasses")(e,"_3814"),glyph:b,ref:function(a){a=d("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(a);if(!a||!e)return;a.classList.remove(e);void a.offsetWidth;a.classList.add(e)}});return k.jsx(c("CenteredContainer.react"),{className:"_3815 _381b",fullHeight:!0,horizontal:!0,ref:function(a){a=d("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(a);if(!a)return;a.classList.remove("_381b");void a.offsetWidth;a.classList.add("_381b")},vertical:!0,children:k.jsxs("div",{children:[a,f]})})};return b}(k.Component);a.defaultProps={enablePlaybackRateControl:!1,isFullscreenRequired:!1,seekIncrement:l,seekFrameWhenPaused:!1};g["default"]=a}),98);
__d("UFI2VideoPlayerRegistry",["EventEmitter","ViewportBounds","destroyOnUnload","getOrCreateDOMID"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("EventEmitter"))(),i=new Map(),j=new Map(),k=new Map(),l=new Map(),m=new Set(),n=new Map();c("destroyOnUnload")(function(){h.removeAllListeners(),i.clear(),j.clear(),k.clear(),l.clear(),m.clear()});function o(a){a=a;var b=[];while(a)b.unshift(a),a=a.parentElement;return b}function p(a,b){var c=o(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=o(e);for(var f=0;f<c.length;++f){if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}f===c.length-1&&((d===null||f>d)&&(d=f,a=b))}});return a}function q(a,b){var c=o(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=o(e);for(var f=0;f<c.length;++f)if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}});return a}var r={_associateUFIController:function(a,b){var d=a.getInstanceID();a=r.findVideoPlayerControllerForElement(a.getRootNode(),b);if(!a||a.isState("destroyed"))return;b=j.get(d);if(b){if(!b.isState("destroyed")&&c("getOrCreateDOMID")(b.getRootNode())===c("getOrCreateDOMID")(a.getRootNode()))return;h.emit(d+"/unregister")}j.set(d,a);h.emit(d+"/register",a)},addOnRegisterListener:function(a){m.add(a)},findVideoPlayerControllerForElement:function(a,b){b=l.get(b);if(!b)return null;if(b.length===1)return b[0];return!a?null:p(a,b.filter(function(a){return!a.isState("destroyed")}).map(function(a){return[a.getRootNode(),a]}))},getAvailableUFIController:function(a){var b=n.get(a);if(b)return b;var c=i.get(a.getVideoID());if(!c)return null;c.length===1?b=c[0]:b=q(a.getRootNode(),c.map(function(a){return[a.getRootNode(),a]}));if(b){c=r.findVideoPlayerControllerForElement(b.getRootNode(),a.getVideoID());if(c!==a)return null;n.set(a,b)}return b},getAvailableVideoPlayerController:function(a){return j.get(a)},getAvailableVideoPlayerControllerForElement:function(a,b){if(!a)return null;var d=k.get(b)||new Map(),e=c("getOrCreateDOMID")(a);a=d.get(e)||r.findVideoPlayerControllerForElement(a,b);d.set(e,a);k.set(b,d);return a},getAvailableVideoPlayerControllerTime:function(a){a=r.getAvailableVideoPlayerController(a);if(!a)return null;a=a.getCurrentTimePosition();return a>=0?Math.floor(a):null},getAvailableVideoPlayerControllerTimeForElement:function(a,b){if(!a)return null;a=r.getAvailableVideoPlayerControllerForElement(a,b);if(!a)return null;b=a.getCurrentTimePosition();return b>=0?Math.floor(b):null},registerUFIController:function(a,b,c){var d=a.getInstanceID(),e=a.getFluentContentToken();if(!e)return;var f=i.get(e);f?f.push(a):(f=[a],i.set(e,f));h.addListener(d+"/register",b);h.addListener(d+"/unregister",c);r._associateUFIController(a,e)},registerVideoPlayerController:function(a){var b=a.getVideoID(),c=l.get(b);c?c.push(a):(c=[a],l.set(b,c),k["delete"](b));m.forEach(function(a){return a()});a=i.get(b);if(!a)return;a.forEach(function(a){return r._associateUFIController(a,b)})},removeOnRegisterListener:function(a){m["delete"](a)},scrollToAvailableVideo:function(a){a=r.getAvailableVideoPlayerController(a);if(!a)return;a=c("ViewportBounds").getElementPosition(a.getRootNode());window.scroll(0,a.y)},seekAvailableVideoPlayerController:function(a,b){a=r.getAvailableVideoPlayerController(a);if(!a)return;["ready","playing","paused","finished"].includes(a.getState())&&(a.pause("seek_initiated"),a.seek(b),a.play("seek_initiated"))},setAvailableVideoPlayerControllerSphericalViewport:function(a,b){a=r.getAvailableVideoPlayerController(a);if(!a)return;a.emit("SphericalVideoViewportTagComment/click",b)},unregisterVideoPlayerControllerForElement:function(a,b){var c=l.get(b);if(!c)return;var d=r.findVideoPlayerControllerForElement(a,b);if(d==null)return;a=c.findIndex(function(a){return a.getRootNode()===d.getRootNode()});c.splice(a,1);l.set(b,c)}};a=r;g["default"]=a}),98);
__d("VODPresenceCVCDisplayStage",[],(function(a,b,c,d,e,f){a=Object.freeze({PRE_ENTER:"pre_enter",POST_ENTER:"post_enter"});f["default"]=a}),66);
__d("VideoFeedRegister",["invariant","Bootloader","FeedVideoPlayerController","VideoAutoplayControllerX","VideoPlayerExperiments","VideoPlayerFeedRegisterConfig"],(function(a,b,c,d,e,f,g,h){function a(a,b){var d=b.controller;b.controller.getOption("VideoWithInstreamVideo","enabled")&&(b.controller=b.controller.getOption("VideoWithInstreamVideo","controller"));var e=new(c("FeedVideoPlayerController"))(a,b);b.controller.registerOption("WatchAndScroll","isEligible",function(){return b.wnsEnabled});b.controller.registerOption("GamingVideo","isGamingVideo",function(){return b.isGamingVideo});if(b.channelVersion){b.channelVersion==="channel_view"&&(b.channelModule||h(0,12396));a=b.channelModule;if((b.channelVersion!=="channel_view"||!a.getInteraction())&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule.isActive()){c("VideoPlayerFeedRegisterConfig").watchAndScrollModule.registerChannelVideoController(b.controller);return}b.channelVersion==="channel_view"&&a.registerVideoController(b.controller)}else{a=e.getVideoPlayerController();a&&a.runOnApiReady(function(){c("VideoAutoplayControllerX").registerVideoUnit(e)})}b.wnsEnabled&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule.registerVideoController(b.controller,b.videoChannelCaller,c("VideoPlayerFeedRegisterConfig").watchAndScrollV3,c("VideoPlayerFeedRegisterConfig").wnsChannelsIntegrationEnabled);!c("VideoPlayerExperiments").disableDisableOffscreenPlayModule&&c("VideoPlayerFeedRegisterConfig").disableOffscreenPlayModule&&c("VideoPlayerFeedRegisterConfig").disableOffscreenPlayModule.registerVideoUnit(e);b.autoPlayWithChannelViewOrSnowlift&&d.runOnApiReady(function(){c("Bootloader").loadModules(["PhotoSnowlift"],function(a){return a.bootstrap(d.getVideoURL())},"VideoFeedRegister")})}g.registerVideoUnit=a}),98);
__d("VideoPlayerRegistry",["EventEmitter","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i=new Set(),j=new(c("EventEmitter"))(),k="added",l="removed";function m(a,b){return j.addListener(a,b)}function a(a,b){return j.once(a,b)}function n(a){return i.has(a)}function d(a){if(n(a))return!1;i.add(a);j.emit(k,a);return!0}function e(a){if(!n(a))return!1;i["delete"](a);j.emit(l,a);return!0}function f(){return i.size}function o(){return Array.from(i)}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=null;o().forEach(function(b){b.getByRootNode()===a&&(c=b)});c||(c=(yield new(h||(h=b("Promise")))(function(b,c){var d=m(k,function(c){c.getRootNode()===a&&(d.remove(),b(c))})})));return c});return q.apply(this,arguments)}g.ADDED=k;g.REMOVED=l;g.addListener=m;g.once=a;g.has=n;g.add=d;g.remove=e;g.count=f;g.getList=o;g.getByRootNode=p}),98);
__d("VideoPlayerRegistryComponent",["invariant","SubscriptionsHandler","VideoPlayerRegistry"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.$1=a||null,this.$2=new(c("SubscriptionsHandler"))(),this.$1&&this.$3()}var b=a.prototype;b.destroy=function(){this.$4(),this.$1=null};b.getController=function(){var a=this.$1;a||h(0,2032);return a};b.enable=function(a){this.$1&&this.$1!==a&&this.$4(),this.$1=a,this.$3()};b.disable=function(a){this.$4()};b.$3=function(){var a=this,b=this.getController();d("VideoPlayerRegistry").add(b);this.$2.addSubscriptions(b.addListener("stateChange",function(){b.isState("destroyed")&&a.destroy()}))};b.$4=function(){var a=this.getController();this.$2.release();this.$2.engage();d("VideoPlayerRegistry").remove(a)};return a}();g["default"]=a}),98);
__d("VideoScrubberPreviewComponent",[],(function(a,b,c,d,e,f){a=function(){function a(b,c){var d=this;if(!c)throw new Error("VideoScrubberPreview Component config null.");this.$3=c;this.$4=b;this.$1=c.hasPreviewThumbnails;this.$2=a.getSpriteURIs(c.spriteIndexToURIMap);this.$5();this.$4.addListener("switchedToFullVideo",function(){return d.$5()})}var b=a.prototype;b.hasPreviewThumbnails=function(){return this.$1};b.$5=function(){this.$4.registerOption("VideoScrubberPreviewComponent","scrubberPreviewSprites",this.getSprites.bind(this)),this.$4.registerOption("VideoScrubberPreviewComponent","hasPreviewThumbnails",this.hasPreviewThumbnails.bind(this)),this.$4.registerOption("VideoScrubberPreviewComponent","previewThumbnailInformation",this.getPreviewThumbnailInformation.bind(this))};b.getSprites=function(){return this.$2};b.getPreviewThumbnailInformation=function(){this.hasPreviewThumbnails()?this.$3.imagesPerColumn=this.$3.maxImagesPerSprite/this.$3.imagesPerRow:this.$3.imagesPerColumn=0;return this.$3};a.getSpriteURIs=function(a){var b=new Map();for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.set(parseInt(c,10),a[c]);return b};return a}();f["default"]=a}),66);
__d("VideoUpdateStateDirectory",["VideoStateDirectory"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.$2=function(){var b=a.$1,d=b.getVideoID(),e=b.getCurrentTimePosition();b=b.getPlaybackDuration();c("VideoStateDirectory").setPlaybackState(d,e,b)}}var b=a.prototype;b.enable=function(a){this.$1=a,a.addListener("finishPlayback",this.$2),a.addListener("pausePlayback",this.$2)};b.disable=function(){};return a}();g["default"]=a}),98);
__d("VideoVODCVCFetchingQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9599779266761915"}),null);
__d("VideoVODCVCFetchingQuery.graphql",["VideoVODCVCFetchingQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"prev_cvc"},c={defaultValue:null,kind:"LocalArgument",name:"stage"},d={defaultValue:null,kind:"LocalArgument",name:"video_asset_id"},e={defaultValue:null,kind:"LocalArgument",name:"video_id"},f=[{alias:null,args:[{kind:"Variable",name:"prev_cvc",variableName:"prev_cvc"},{kind:"Variable",name:"stage",variableName:"stage"},{kind:"Variable",name:"video_asset_id",variableName:"video_asset_id"},{kind:"Variable",name:"video_id",variableName:"video_id"}],concreteType:"VODPresenceCVCResponse",kind:"LinkedField",name:"vod_presence_cvc",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cvc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_poll_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_displayed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_asset_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e],kind:"Fragment",metadata:null,name:"VideoVODCVCFetchingQuery",selections:f,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,c,d,a],kind:"Operation",name:"VideoVODCVCFetchingQuery",selections:f},params:{id:b("VideoVODCVCFetchingQuery_facebookRelayOperation"),metadata:{},name:"VideoVODCVCFetchingQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VideoVODCVCFetching",["RelayFBEnvironment","RelayModern","Run","SubscriptionsHandler","VODPresenceCVCDisplayStage","VideoVODCVCFetchingQuery.graphql","clearTimeout","keyMirror","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=c("keyMirror")(c("VODPresenceCVCDisplayStage")),i=1e4;a=function(){function a(a){var b=this;this.$1=null;this.$3=null;this.$4=null;this.$5=i;this.$6=!1;this.$10=function(){b.$6=!0,c("clearTimeout")(b.$4)};if(a.isAd()||a.isLiveVideo())return;this.$7=a;a.registerOption("VideoVODCVCFetching","cvcData",function(){return b.$1});this.$2=new(c("SubscriptionsHandler"))();this.$2.addSubscriptions(a.addListener("beginPlayback",function(){b.$3=null}),a.addListener("updateStatus",function(c){a.isState("playing")&&(b.$3===null&&(b.$3=c.position),b.$3+3<=c.position&&(b.$3=Infinity,b.$9(a)))}),a.addListener("pausePlayback",this.$10),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&b.$10()}),a.addListener("becomeInvisible",this.$10));d("Run").onLeave(function(){return b.cleanOnLeave()})}var b=a.prototype;b.cleanOnLeave=function(){this.$2&&this.$2.release(),this.$10(),this.$7&&this.$7.hasOption("VideoVODCVCFetching","cvcData")&&this.$7.unregisterOption("VideoVODCVCFetching","cvcData")};b.$9=function(a){this.$6=!1,this.$11(a,h.POST_ENTER)};b.getQueryPromise=function(a,b,e,f){return d("RelayModern").fetchQuery(c("RelayFBEnvironment"),c("VideoVODCVCFetchingQuery.graphql"),{video_id:a.getVideoID(),stage:b,video_asset_id:e,prev_cvc:f})};b.$11=function(a,b){var d,e=this;d=this.getQueryPromise(a,b,this.$8,(d=this.$1)==null?void 0:d.viewerCount);c("promiseDone")(d,function(d){if(e.$6)return;d=d.vod_presence_cvc;if(d){var f=d.cvc||0,g=d.is_displayed,j=d.next_poll_ms||i;e.$8=d.video_asset_id;e.$1={viewerCount:f,showVODIndicator:g};a.emit("VideoVODCVC/viewCountChange",e.$1);j>=0&&b===h.POST_ENTER&&(e.$4=c("setTimeout")(e.$11.bind(e,a,b),j))}},function(d){if(e.$6)return;e.$4=c("setTimeout")(e.$11.bind(e,a,b),e.$5);e.$5=Math.min(Number.MAX_SAFE_INTEGER,2*e.$5)})};return a}();g["default"]=a}),98);
__d("VideoVODCVCSubscription",["EntityPresenceClient","Int64","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=42,i=7,j=5;a=function(){function a(a){var b=this;this.$7=function(){b.$5=null,b.$4&&(b.$4&&b.$4.leave(),b.$4=null)};if(a.isAd()||a.isLiveVideo())return;this.$1=new(c("SubscriptionsHandler"))();this.$4=null;this.$2=a;this.$3=this.$2.getPlayerOrigin();this.$5=null;this.$1.addSubscriptions(a.addListener("beginPlayback",function(){b.$5=null}),a.addListener("updateStatus",function(a){b.$2.isState("playing")&&(b.$5===null&&(b.$5=a.position),b.$5+3<=a.position&&(b.$5=Infinity,b.$6()))}),a.addListener("pausePlayback",this.$7),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&b.$7()}),a.addListener("becomeInvisible",this.$7),a.addListener("seekEnd",this.$7),a.addListener("TahoeController/exitTahoe",this.$7));d("Run").onLeave(function(){return b.cleanOnLeave()})}var b=a.prototype;b.cleanOnLeave=function(){this.$7(),this.$1&&this.$1.release()};b.$6=function(){if(this.$4)return;this.$4=d("EntityPresenceClient").enter("vod",this.$2.getVideoID(),this.getLoggingCapabilitiesForEntityPresence().toString())};b.getLoggingCapabilitiesForEntityPresence=function(){var a,b;(a=c("Int64")).fromInt(0);b=a.fromString(Date.now().toString());var d=7;b=b.shiftLeft(d);b=b.add(a.fromInt(1));d=64-(h+i+j+d);b=b.shiftLeft(d);b=b.shiftLeft(j);b=b.add(a.fromInt(this.mapPlayerFormatToCapabilityBits(this.$2.getPlayerFormat())));b=b.shiftLeft(i);b=b.add(a.fromInt(this.mapPlayerOriginToCapabilityBits(this.$3)));return b};b.mapPlayerOriginToCapabilityBits=function(a){if(a===null)return 0;switch(a){case"commerce":return 12;case"direct_inbox":return 4;case"events":return 18;case"explorefeed":return 19;case"fb_stories":return 5;case"group":return 11;case"instant_articles":return 16;case"instant_shopping":return 16;case"live_chaining":return 22;case"living_room":return 9;case"living_room_recap":return 8;case"media_gallery":return 3;case"movie_checkout_flow":return 21;case"newsfeed":return 13;case"notifications":return 7;case"page_timeline":return 17;case"permalink":return 15;case"photosfeed":return 14;case"saved":return 23;case"search":return 20;case"top_live_bookmark":return 1;case"user_timeline":return 24;case"video_home":return 2;case"unknown":default:return 0}};b.mapPlayerFormatToCapabilityBits=function(a){if(a===null)return 0;switch(a){case"inline":return 1;case"snowlift":return 2;case"permalink":return 3;case"channel":return 4;case"full_screen":return 5;case"social_player":return 6;case"tv":return 7;case"misc":return 8;case"watch_scroll":return 9;case"watch_scroll_app_background":return 10;case"watch_and_go":return 11;case"watch_and_browse":return 12;case"canvas":return 13;case"tahoe":return 14;case"fb_stories":return 15;default:return 0}};return a}();g["default"]=a}),98);
__d("VideoVODCVCUI.react",["cx","ix","Image.react","intlSummarizeNumber","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return k.jsxs("div",{className:"_75tx",children:[k.jsx(c("Image.react"),{className:"_75ty",src:i("488783")}),c("intlSummarizeNumber")(this.props.viewerCount)]})};return b}(k.PureComponent);g["default"]=a}),98);
__d("VideoVODIndicator.react",["cx","fbt","BasicFBNux","JSResource","SubscriptionsHandler","TooltipData","VideoVODCVCUI.react","joinClasses","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("lazyLoadComponent")(c("JSResource")("XUIAmbientNUX.react").__setRef("VideoVODIndicator.react")),m=6171,n=!1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$2=null;c.state={showVODIndicator:!1,isDisplayingAdBreak:!1,viewerCount:null,showNUX:!1};c.$3=function(){d("BasicFBNux").onDismiss(m),c.setState({showNUX:!1})};b=c.props.vpc;if(c.props.renderLocation==="tahoeBackAffordance"){b=b.getOption("VideoVODCVCFetching","cvcData");b&&(c.state.showVODIndicator=b.showVODIndicator,c.state.viewerCount=b.viewerCount)}return c}var e=b.prototype;e.initSubscriptions=function(a){var b=this;this.$2=new(c("SubscriptionsHandler"))();this.$2.addSubscriptions(a.addListener("VideoVODCVC/viewCountChange",function(a){b.setState({showVODIndicator:a.showVODIndicator,viewerCount:a.viewerCount})}),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&b.setState({showVODIndicator:!1})}),a.addListener("commercialBreak/vodBreakStarting",function(){b.setState({isDisplayingAdBreak:!0})}),a.addListener("commercialBreak/showUFI",function(){b.setState({isDisplayingAdBreak:!1})}))};e.releaseSubscriptions=function(){this.$2&&this.$2.release()};e.componentDidMount=function(){this.initSubscriptions(this.props.vpc)};e.componentWillUnmount=function(){this.releaseSubscriptions()};e.render=function(){var a=this;if(!this.state.showVODIndicator||!this.state.viewerCount||this.state.isDisplayingAdBreak)return null;var b=null,e=null;this.state.showNUX?(e=k.jsx(k.Suspense,{fallback:null,children:k.jsx(l,{contextRef:function(){return a.$1},position:"right",shown:!0,onCloseButtonClick:this.$3,children:i._("See how many people are watching this video right now")})}),n||(n=!0,d("BasicFBNux").onView(m))):b=d("TooltipData").propsFor(i._("Number of people watching now"),"right");return k.jsxs("div",babelHelpers["extends"]({className:c("joinClasses")("_75ug"+(this.props.renderLocation==="tahoeBackAffordance"?" _7348":"")+(this.props.renderLocation==="videoHomeFeedUnit"?" _72u5":"")+(this.props.renderLocation==="videoNewsFeedUnit"?" _75uh":"")+" uiContextualLayerParent")},b,{children:[k.jsx(c("VideoVODCVCUI.react"),{ref:function(b){return a.$1=b},viewerCount:this.state.viewerCount}),e]}))};return b}(k.Component);g["default"]=a}),226);
__d("VideoWithClickToTahoe",["cx","AsyncRequest","Bootloader","CSS","Event","URI","logVideosClickTracking"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=!1;a=function(){function a(a,b,d,e,f,g,h,j,k,l,m,n,o,p){this.$16=!1,this.$5=a,this.$6=new(i||(i=c("URI")))(b),this.$4=d,this.$1=e,this.$2=f,this.$7=g,this.$8=h,this.$9=j,this.$10=m,this.$11=k,this.$12=l,this.$13=p,this.$14=n,this.$15=o,this.$5.addListener("stateChange",this.$17.bind(this)),this.$5.addListener("toggleFullscreen",this.$17.bind(this)),this.$5.setLogEntryPropertyGetters({channel_eligibility:"eligible"}),this.$5.addListener("enterTahoe",this.$18.bind(this,"control_click")),this.canOpenTahoe()&&this.$19(),this.$5.addListener("clickVideo",this.$20.bind(this)),this.$5.hasSeenClick()&&this.$20()}var b=a.prototype;b.$19=function(){if(this.$21())return;var a=this.$5.getVideoNode();d("CSS").addClass(a,"_62vr");d("CSS").addClass(a,"_1yhw");d("CSS").addClass(a,"_400z");d("CSS").addClass(a,"_1vek");var b=this.$5.isBroadcast();b&&d("CSS").addClass(a,"_3yn5")};b.$22=function(){if(this.$21())return;var a=this.$5.getVideoNode();d("CSS").removeClass(a,"_62vr");d("CSS").removeClass(a,"_1yhw");d("CSS").removeClass(a,"_400z");d("CSS").removeClass(a,"_1vek");d("CSS").removeClass(a,"_3yn5")};b.$17=function(){this.$21()||(this.canOpenTahoe()?this.$19():this.$22())};b.$21=function(){return this.$5.isState("destroyed")};b.$20=function(){if(this.$16)return;if(!this.canOpenTahoe())if(this.$5.isState("playing")){if(this.$5.getOption("VideoWithLiveBroadcast","isLive")||this.$5.getOption("VideoWithInstreamVideo","disableClickToPause"))return;this.$5.pause("user_initiated")}else c("logVideosClickTracking")(this.$5.getVideoNode()),this.$5.play("user_initiated");else this.$18("player_click")};b.$23=function(){j=!0,c("Bootloader").loadModules(["TahoeController","TahoeVideoView"],function(){},"VideoWithClickToTahoe"),this.$3&&this.$3.remove(),this.$3=null};b.canOpenTahoe=function(){var a=this.$5.getSource();if(a=="tahoe"||a=="channel")return!1;a=this.$5.getOption("VideoWithInstreamVideo","disableClickToPause");return this.$5.isFullscreen()||a||!this.$5.isState("playing")?!1:!0};b.invokeClickEvent=function(){this.$20()};b.disable=function(){this.$16=!0};b.enable=function(){this.$16=!1};b.$18=function(a){var b=this;if(this.$2)new(c("AsyncRequest"))(this.$6.toString()).send(),this.$5.pause();else{j=!0;this.$3&&this.$3.remove();this.$3=null;var d=(i||(i=c("URI"))).getNextURI(),e=babelHelpers["extends"]({},d.getQueryData(),{ref:"tahoe"});c("Bootloader").loadModules(["TahoeController"],function(c){c.openFromVideoPlayer(b.$5,b.$6.setQueryData(e),b.$4,b.$1,a,b.$7,b.$8,b.$9,b.$11,b.$12,b.$10,b.$14,b.$15,b.$13)},"VideoWithClickToTahoe")}};a.setUpBootloadOnHover=function(a){if(j||a.$3)return;a.$3=c("Event").listen(a.$5.getRootNode(),"mouseover",a.$23.bind(a))};return a}();g["default"]=a}),98);
__d("VideoWithFluentUFISupport",["UFI2VideoPlayerRegistry"],(function(a,b,c,d,e,f,g){a=function(a){c("UFI2VideoPlayerRegistry").registerVideoPlayerController(a)};g["default"]=a}),98);
__d("VideoWithLoopingPlayback",["setImmediate"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,d){var e=this;b===void 0&&(b=-1);d===void 0&&(d=!1);this.$5=!1;this.$8=function(){var a,b=e.$1.getOption("FeedAutoplay","isVisibleForAutoplay"),d=e.$1.getOption("WatchAndScroll","isActive"),f=e.$1.getIsInChannel(),g=e.$1.getSource()==="tahoe";a=(a=e.$1.getVideoNodeNullable())==null?void 0:a.loop;if(e.$7&&a===!1)return;!e.$5&&(b||b===void 0)&&!d&&!f&&!g&&(!e.$4||e.$3<e.$4)&&(c("setImmediate")(function(){return e.$1.play("loop_initiated")}),e.$3++,e.$4&&e.$3===e.$4-1&&(e.$1.setOption("Looping","isLooping",!1),e.setVideoNodeLoop(!1)))};this.$1=a;this.$2=!0;this.$3=1;this.$4=b>-1?b:null;this.$6=this.$1.addListener("finishPlayback",this.$8);this.$1.registerOption("Looping","isLooping",function(){return e.$2},function(a){return e.$9(a)});this.$1.registerOption("Looping","disabled",function(){return e.$5},function(a){return e.$5=a});this.$7=d;this.setVideoNodeLoop(!0)}var b=a.prototype;b.setVideoNodeLoop=function(a){if(!this.$7)return;var b=this.$1.getVideoNodeNullable();b!=null&&(b.loop=a)};b.destroy=function(){this.$6!=null&&(this.$6.remove(),this.$6=null),this.$1.hasOption("Looping","isLooping")&&this.$1.unregisterOption("Looping","isLooping"),this.$1.hasOption("Looping","disabled")&&this.$1.unregisterOption("Looping","disabled")};b.isLooping=function(){return this.$2};b.getLoopCount=function(){return this.$3};b.getMaxLoopCount=function(){return this.$4};b.setMaxLoopCount=function(a){this.$4=a>-1?a:null};b.$9=function(a){this.$2=a};return a}();g["default"]=a}),98);
__d("XVideoWithRapidFeedbackAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/instream_video/rapid_feedback/async/",{ad_type:{type:"Enum",required:!0,enumType:1},video_id:{type:"String",required:!0},ad_client_token:{type:"String"},elapsed_time_since_ad:{type:"Float"},ad_position_in_video:{type:"Float"},player_origin:{type:"Enum",enumType:1},player_sub_origin:{type:"String"},player_format:{type:"Enum",enumType:1},script_path:{type:"String"},is_indicator_shown:{type:"Bool",defaultValue:!1},is_ad_complete:{type:"Bool",defaultValue:!1}})}),null);
__d("onViewportChanged",["EventListener","emptyFunction","getViewportDimensions","nullthrows","requestAnimationFrame"],(function(a,b,c,d,e,f,g){var h=[],i=!1,j=null,k,l;function m(){var a=c("getViewportDimensions").withoutScrollbars();return{top:0,bottom:a.height,left:0,right:a.width}}function a(a,b){b={transform:b||c("emptyFunction").thatReturnsArgument,callback:a,needsUpdate:!0};h.push(b);t();o();return{remove:n.bind(null,b),scheduleCheck:r.bind(null,b)}}function n(a){a=h.indexOf(a);a!==-1&&(h.splice(a,1),h.length===0&&(p(),j=null))}function o(){l||(l=c("EventListener").capture(window,"scroll",s),k=c("EventListener").capture(window,"resize",q))}function p(){l!==null&&(l.remove(),l=null),k!=null&&(k.remove(),k=null)}function q(){j=null,s()}function r(a){a.needsUpdate=!0,t()}function s(){h.map(function(a){return a.needsUpdate=!0}),t()}function t(){i||(i=!0,c("requestAnimationFrame")(function(){i=!1,v()}))}function u(a){if(a.needsUpdate){a.needsUpdate=!1;return!0}return!1}function v(){j||(j=m());var a=h.filter(u),b=a.map(function(a){return a.transform.call(null,c("nullthrows")(j))});a.forEach(function(a,c){return a.callback.call(null,b[c])})}g["default"]=a}),98);
__d("VideoWithRapidFeedback",["AsyncRequest","DateConsts","ScriptPath","ViewportTrackingHelper","XVideoWithRapidFeedbackAsyncController","onViewportChanged"],(function(a,b,c,d,e,f,g){var h=10*d("DateConsts").MS_PER_SEC;a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=0,this.$4=0,this.$6=!1,this.$7=!1,a.isState("playing")&&this.$8(),a.addListener("beginPlayback",this.$8.bind(this)),a.addListener("pausePlayback",this.$9.bind(this)),a.addListener("commercialBreak/vodBreakStarting",this.$10.bind(this)),a.addListener("commercialBreak/showUFI",this.$11.bind(this)),this.$5=this.$12(),c("onViewportChanged")(this.$13.bind(this))}var b=a.prototype;b.$8=function(){this.$3===0&&(this.$3=Date.now())};b.$9=function(){this.$3>0&&(this.$4+=Date.now()-this.$3),this.$3=0};b.$10=function(){this.$6=!0};b.$11=function(){this.$6&&(this.$7=!0)};b.$13=function(){if(this.$1.isState("destroyed"))return;var a=this.$5;this.$5=this.$12();if(a&&!this.$5){a=this.$4;this.$3>0&&(a+=Date.now()-this.$3);a>h&&(this.$4=0,this.$3=0,this.$14())}};b.$12=function(){return d("ViewportTrackingHelper").isVisible(this.$1.getRootNode(),0)};b.$14=function(){var a=null,b=null,e=null,f=null,g=null,h=null,i=this.$1.getOption("VideoWithInstreamVideo","controller");if(i){i=i.getMostRecentAdInfo();i&&i.adClientToken&&(a=i.adClientToken,b=Date.now()-i.adStartPlayingTimeMs,e=i.adPositionInVideoMs,f=i.playerOrigin,g=i.playerSubOrigin,h=i.playerFormat)}i=c("XVideoWithRapidFeedbackAsyncController").getURIBuilder().setEnum("ad_type",this.$2).setString("video_id",this.$1.getVideoID()).setString("ad_client_token",a).setFloat("elapsed_time_since_ad",b).setFloat("ad_position_in_video",e).setEnum("player_format",h).setEnum("player_origin",f).setString("player_sub_origin",g).setString("script_path",d("ScriptPath").getScriptPath()).setBool("is_indicator_shown",this.$6).setBool("is_ad_complete",this.$7);new(c("AsyncRequest"))(i.getURI()).send()};return a}();g["default"]=a}),98);
__d("VideoWithSequentialAutoplay",["Arbiter","SubscriptionsHandler","VideoPlayerHTML5Experiments","destroyOnUnload"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a,c){var d=this;this.$1=a;this.$2=c;this.$3=new(b("SubscriptionsHandler"))();if(b("VideoPlayerHTML5Experiments").displayLoopingWhenAutoplayNextVideo&&this.$2&&this.$2!=="0")if(this.$1.hasOption("Looping","disabled"))this.$1.setOption("Looping","disabled",!0);else{var e=this.$1.addListener("optionsChange",function(){d.$1.hasOption("Looping","disabled")&&(d.$1.setOption("Looping","disabled",!0),e.remove())});this.$3.addSubscriptions(e)}this.$1.addListener("finishPlayback",this.$4.bind(this));this.$3.addSubscriptions(b("Arbiter").subscribe("nextVideoAutoplay",function(a,b){b.nextVideoID==d.$1.getVideoID()&&d.$1.play("autoplay_initiated")}));b("destroyOnUnload")(function(){return d.$3.release()})}var c=a.prototype;c.$4=function(){b("Arbiter").inform("nextVideoAutoplay",{nextVideoID:this.$2})};return a}();e.exports=a}),null);